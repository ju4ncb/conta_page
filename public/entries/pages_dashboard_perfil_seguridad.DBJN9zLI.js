import{r as o,j as e,i as x,a as C,b as y}from"../chunks/chunk-CdC7BqoH.js";import{u as b}from"../chunks/chunk-Cgl3FOY4.js";import{D as g,S as j,a as i}from"../chunks/chunk-C1NQNBfv.js";import{F as n}from"../chunks/chunk-DI-FeWUm.js";/* empty css                      */import"../chunks/chunk-D_bf-hCy.js";function T(){b();const[l,d]=o.useState(!1),[a,h]=o.useState({}),[f,u]=o.useState("");async function s(r,t,p){if(t===p)try{const S=await(await fetch("/update-usuario",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id_us:a.id_us+"",columna:r,valor:t})})).text();r==="username"?(a.username=t,localStorage.setItem("user",JSON.stringify(a))):r==="correo"?(a.correo=t,localStorage.setItem("user",JSON.stringify(a))):(a.contrasena=t,localStorage.setItem("user",JSON.stringify(a))),u(S+r)}catch(m){console.error("Error al cambiar los datos:",m)}else u("No concuerdan "+r)}function c(){d(l===!1)}return o.useEffect(()=>{const r=localStorage.getItem("user");r===null?window.location.href="/":h(JSON.parse(r))},[]),e.jsxs(g,{children:[e.jsxs(j,{isBack:!0,children:[e.jsxs(i,{handleClick:()=>{window.location.href="/dashboard/perfil"},children:[e.jsx("i",{className:"bi bi-person-dash-fill"}),e.jsx("p",{children:"Mi informacion"})]}),e.jsxs(i,{handleClick:()=>{window.location.href="/dashboard/perfil"},children:[e.jsx("i",{className:"bi bi-lock-fill"}),e.jsx("p",{children:"Seguridad"})]}),e.jsxs(i,{handleClick:()=>{c()},children:[e.jsx("i",{className:"bi bi-trash3-fill"}),e.jsx("p",{children:"Eliminar cuenta"})]})]}),e.jsx("main",{className:"dash-content",style:{flex:4},children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsxs("div",{style:{borderRadius:20,overflow:"hidden",display:"flex"},children:[e.jsx(n,{onSubmitForm:r=>{s("username",r[0],r[1])},buttons:[{content:"Cambiar username",function:()=>{},isSubmit:!0}],formInputs:[{hideChar:!1,maxChar:20,minChar:4,required:!0,desc:"Usuario",name:"username"},{hideChar:!1,maxChar:20,minChar:4,required:!0,desc:"Confirmar usuario",name:"usernameC"}],errorMessage:""}),e.jsx(n,{onSubmitForm:r=>{s("correo",r[0],r[1])},buttons:[{content:"Cambiar correo",function:()=>{},isSubmit:!0}],formInputs:[{hideChar:!1,maxChar:100,minChar:0,required:!0,desc:"Correo",name:"correo"},{hideChar:!1,maxChar:100,minChar:0,required:!0,desc:"Confirmar correo",name:"correoC"}],errorMessage:""}),e.jsx(n,{onSubmitForm:r=>{s("contrasena",r[0],r[1])},buttons:[{content:"Cambiar contraseña",function:()=>{},isSubmit:!0}],formInputs:[{hideChar:!0,maxChar:20,minChar:4,required:!0,desc:"Contraseña",name:"contraseña"},{hideChar:!0,maxChar:20,minChar:4,required:!0,desc:"Confirmar contraseña",name:"contraseñaC"}],errorMessage:""})]}),e.jsx("p",{style:{color:"#ff6969"},children:f})]})}),l&&e.jsx("main",{className:"modal-container",children:e.jsxs("main",{className:"modal",children:[e.jsx("p",{children:"¿Seguro que quieres eliminar tu cuenta?"}),e.jsx("button",{className:"buttonModal",onClick:async()=>{try{const t=await(await fetch("/delete-table",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tabla:"Usuarios",condicion:"id_us = "+a.id_us})})).text();console.log(t),localStorage.removeItem("user"),window.location.href="/"}catch(r){console.error("Error al eliminar la cuenta:",r)}},children:"Eliminar"}),e.jsx("button",{className:"buttonModal",onClick:c,children:"Cancelar"})]})})]})}const w=Object.freeze(Object.defineProperty({__proto__:null,default:T},Symbol.toStringTag,{value:"Module"})),A={isClientRuntimeLoaded:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:!0}},onBeforeRenderEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:null}},dataEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:{server:!0}}},onRenderClient:{type:"standard",definedAtData:{filePathToShowToUser:"/renderer/+onRenderClient.tsx",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:y}},onPageTransitionStart:{type:"standard",definedAtData:{filePathToShowToUser:"/renderer/+onPageTransitionStart.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:C}},onPageTransitionEnd:{type:"standard",definedAtData:{filePathToShowToUser:"/renderer/+onPageTransitionEnd.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:x}},Page:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/dashboard/perfil/seguridad/+Page.tsx",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:w}},hydrationCanBeAborted:{type:"standard",definedAtData:{filePathToShowToUser:"/renderer/+config.ts",fileExportPathToShowToUser:["default","hydrationCanBeAborted"]},valueSerialized:{type:"js-serialized",value:!0}}};export{A as configValuesSerialized};
